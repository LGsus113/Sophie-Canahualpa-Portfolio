---
import type { ImageCarousel } from "@src/TypeScript/type";

const {
  images,
  interval = 4000,
  className = "",
  pauseOnHover = false,
} = Astro.props as ImageCarousel;
---

<div
  class:list={["relative overflow-hidden", className]}
  data-carousel
  data-interval={interval}
  data-pause-hover={pauseOnHover}
>
  {
    images.map((img, index) => (
      <img
        src={img.src}
        alt={`Slide ${index + 1}`}
        class={`carousel-slide absolute size-full object-cover object-center ${
          index === 0 ? "is-active" : ""
        }`}
        loading={index === 0 ? "eager" : "lazy"}
        decoding="async"
      />
    ))
  }
  <slot />
</div>

<script>
  import { initCarousel } from "@src/TypeScript/carousel-home";
  initCarousel();
</script>

<style>
  .carousel-slide {
    opacity: 0;
    transition: opacity 2s ease-in-out;
    will-change: opacity;
  }

  .carousel-slide.is-active {
    opacity: 1;
    z-index: 1;
  }
</style>
